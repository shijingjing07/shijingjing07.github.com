<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  
  <title>迪米特</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  
    <meta name="author" content="迪米特">
  
  
  <meta name="description" content="路过秋天">
<meta property="og:type" content="website">
<meta property="og:title" content="迪米特">
<meta property="og:url" content="https://shijingjing07.github.io/page/13/index.html">
<meta property="og:site_name" content="迪米特">
<meta property="og:description" content="路过秋天">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="迪米特">
<meta name="twitter:description" content="路过秋天">
  
  
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
  
  <link rel="stylesheet" href="/css/style.css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
</head>

<body>
  <div class="wrapper">
    <header id="header">
  <div class="title">
    <h1><a href="/">迪米特</a></h1>
    <p><a href="/">路过秋天</a></p>
  </div>
  <nav class="nav">
    <ul>
      
        <li><a href="/">Home</a></li>
      
        <li><a href="/archives">Archives</a></li>
      
        <li><a href="/about">About</a></li>
      
        <li><a href="/atom.xml">rss</a></li>
      
      
    </ul>
    <div class="clearfix"></div>
  </nav>
  <div class="clearfix"></div>
</header>
    <div class="content">




  
    <article class="post">
  <header>
    
      <div class="icon"></div>
      <a href="/2016/04/07/c--日期和时间函数/">
  <time datetime="2016-04-07T00:35:00.000Z">
    2016-04-07
  </time>
</a>
    
    
  
    <h1 class="title"><a href="/2016/04/07/c--日期和时间函数/">c--日期和时间函数</a></h1>
  

  </header>
  
  <div class="entry">
    
      <p>C的标准库&lt;time.h&gt;包含了一些处理时间与日期的函数。</p>
<p>1.clock_t clock(void);</p>
<p>函数返回程序自开始执行后的处理器时间，类型是clock_t，单位是tick。如果有错误，clock()函数就返回-1。</p>
<p>类型clock_t在&lt;time.h&gt;中定义，等价于size_t类型。CLOCKS_PER_SEC是&lt;time.h&gt;中定义的宏，表示一秒内的tick数，且是clock_t类型。将clock()函数返回值除以CLOCKS_PER_SEC，得到处理器运行时间。</p>
<p>代码示例：</p>
<pre><code>#include &lt;stdio.h&gt;
#include&lt;time.h&gt;
#include&lt;windows.h&gt;
#include&lt;stdlib.h&gt;
main()
{
    clock_t start,end;
    double cpu_time;
    start = clock();
    Sleep(2000);
    end = clock();
    cpu_time = (double)(end-start)/CLOCKS_PER_SEC;
    printf(&quot;%.2lf&quot;,cpu_time);
    system(&quot;pause&quot;);
}
</code></pre><p>输出结果：2.00</p>
<p>2. time_t time(time_t *time_t)<br>time()函数返回从1970年1月1日格林威治时间0点0分0秒到现在的秒数。类型time_t在&lt;time.h&gt;中定义，等价于long。<br>如果变元不是NULL，则返回值就存在time_t变元指向的位置中。</p>
<p>double difftime(time_t T2,time_t T1)<br>返回T2-T1的数值，类型是double，单位是秒。</p>
<p>代码示例：</p>
<pre><code>#include &lt;stdio.h&gt;
#include&lt;time.h&gt;
#include&lt;windows.h&gt;
#include&lt;stdlib.h&gt;
main()
{
    time_t calendar_start,calendar_end;
    calendar_start = time(NULL);
    Sleep(2000);
    calendar_end = time(NULL);
    printf(&quot;start:%d\n&quot;,calendar_start);
    printf(&quot;end:%d\n&quot;,calendar_end);
    printf(&quot;diff:%.0lf\n&quot;,difftime(calendar_end,calendar_start));
    system(&quot;pause&quot;);
}
</code></pre><p>输出结果：<br>start:1460010918<br>end:1460010920<br>diff:2</p>
<p>3.char <em>ctime(const time_t </em>timer)<br>函数接收一个time_t变量的指针作为变元，返回一个指向26个字符的字符串指针。其中有星期，日期，时间以及年，最后用一个\n和\0终止。如：”Mon Aug<br>25 10:45:36 2015\n\0”</p>
<p>代码示例：</p>
<pre><code>#include &lt;stdio.h&gt;
#include&lt;time.h&gt;
#include&lt;stdlib.h&gt;
main()
{
    time_t calendar;
    calendar = time(NULL);
    printf(&quot;%s\n&quot;,ctime(&amp;calendar));
    system(&quot;pause&quot;);
}
</code></pre><p>输出结果：Thu Apr 07 14:34:10 2016</p>
<p>4.struct tm <em>localtime(const time_t</em> timer)<br>函数接收一个time_t值的指针，返回结构类型tm的指针。</p>
<p>tm结构如下：<br>struct tm {<br>int tm_sec; /<em> 秒 - 取值区间为[0,59] </em>/<br>int tm_min; /<em> 分 - 取值区间为[0,59] </em>/<br>int tm_hour; /<em> 时 - 取值区间为[0,23] </em>/<br>int tm_mday; /<em> 一个月中的日期 - 取值区间为[1,31] </em>/<br>int tm_mon; /<em> 月份（从一月开始，0代表一月） - 取值区间为[0,11] </em>/<br>int tm_year; /<em> 年份，其值等于实际年份减去1900 </em>/<br>int tm_wday; /<em> 星期 - 取值区间为[0,6]，其中0代表星期天，1代表星期一 </em>/<br>int tm_yday; /<em> 从每年的1月1日开始的天数 </em>/<br>int tm_isdst; /<em> 夏令时标识符。</em>/<br>}</p>
<p>代码示例：</p>
<pre><code>#include &lt;stdio.h&gt;
#include&lt;time.h&gt;
#include&lt;stdlib.h&gt;
main()
{
    time_t calendar;
    struct tm *time_data;
    char *month[] = {&quot;一月&quot;,&quot;二月&quot;,&quot;三月&quot;,&quot;四月&quot;,&quot;五月&quot;,&quot;六月&quot;,&quot;七月&quot;,&quot;八月&quot;,&quot;九月&quot;,&quot;十月&quot;,&quot;十一月&quot;,&quot;十二月&quot;};
    char *week[] = {&quot;星期一&quot;,&quot;星期二&quot;,&quot;星期三&quot;,&quot;星期四&quot;,&quot;星期五&quot;,&quot;星期六&quot;,&quot;星期日&quot;};
    char *suffix[] = {&quot;st&quot;,&quot;nd&quot;,&quot;rd&quot;,&quot;th&quot;};
    enum suffixIndex {st,nd,rd,th} sufsel = th;
    calendar = time(NULL);
    time_data = localtime(&amp;calendar);
    printf(&quot;format date:%d/%d/%d\n&quot;,time_data-&gt;tm_year+1900,time_data-&gt;tm_mon,time_data-&gt;tm_mday);
    switch(time_data-&gt;tm_mday)
    {
    case 1:
    case 21:
    case 31:
        sufsel = st;
        break;
    case 2:
    case 22:
        sufsel = nd;
        break;
    case 3:
    case 23:
        sufsel = rd;
        break;
    default:
        sufsel = th;
        break;
    }
    printf(&quot;today is %s,%s,%d%s,%d&quot;,week[time_data-&gt;tm_wday],month[time_data-&gt;tm_mon],time_data-&gt;tm_mday,suffix[sufsel],time_data-&gt;tm_year+1900);
    system(&quot;pause&quot;);
}
</code></pre><p>输出结果：<br>format date:2016/3/7<br>today is 星期五,四月,7th,2016</p>
<p>4.localtime()函数生成的是本地时间，若要使用UTC(世界调整时间)，可使用gmtime()函数</p>
<p>5.time_t mktime(struct tm *ptime)<br>函数接收一个tm结构的变元指针，返回值类型为timt_t。</p>

    
  </div>
  <footer class="end-sep">
    
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>


  
    <article class="post">
  <header>
    
      <div class="icon"></div>
      <a href="/2016/04/01/mysql--Ubuntu下设置MySQL字符集为utf8/">
  <time datetime="2016-04-01T00:34:00.000Z">
    2016-04-01
  </time>
</a>
    
    
  
    <h1 class="title"><a href="/2016/04/01/mysql--Ubuntu下设置MySQL字符集为utf8/">mysql--Ubuntu下设置MySQL字符集为utf8</a></h1>
  

  </header>
  
  <div class="entry">
    
      <p>1.mysql配置文件地址<br>/etc/mysql/my.cnf</p>
<p>2.在[mysqld]在下方添加以下代码<br>[mysqld]<br>init_connect=’SET collation_connection = utf8_unicode_ci’<br>init_connect=’SET NAMES utf8’<br>character-set-server=utf8<br>collation-server=utf8_unicode_ci<br>skip-character-set-client-handshake</p>
<p>3.重启mysql服务<br>sudo service mysql restart</p>
<p>4.检测字符集是否更新成utf8.<br>进入mysql，mysql -u root -p,输入show variables like ‘%character%’ 查看字符集<br>+————————–+—————————-+<br>| Variable_name | Value |<br>+————————–+—————————-+<br>| character_set_client | utf8 |<br>| character_set_connection | utf8 |<br>| character_set_database | utf8 |<br>| character_set_filesystem | binary |<br>| character_set_results | utf8 |<br>| character_set_server | utf8 |<br>| character_set_system | utf8 |<br>| character_sets_dir | /usr/share/mysql/charsets/ |<br>+————————–+—————————-+</p>
<p>注意事项：在修改字符集之前已经建立的数据库，character_set_database值不会发生改变，往数据库中插入中文数据仍然会显示乱码，所以最好在安装完MySQL后就将字符集改成utf8，否则后续修改会较麻烦。</p>

    
  </div>
  <footer class="end-sep">
    
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>


  
    <article class="post">
  <header>
    
      <div class="icon"></div>
      <a href="/2016/04/01/python--使用MySQL数据库/">
  <time datetime="2016-04-01T00:05:00.000Z">
    2016-04-01
  </time>
</a>
    
    
  
    <h1 class="title"><a href="/2016/04/01/python--使用MySQL数据库/">python--使用MySQL数据库</a></h1>
  

  </header>
  
  <div class="entry">
    
      <p>1.安装mysql<br>sudo apt-get install mysql-server<br>Sudo apt-get install mysql-client</p>
<p>2.安装MySQL-python驱动<br>sudo apt-get install mysql-python</p>
<p>3.测试是否安装成功<br>python解释器命令下运行 import MySQLdb<br>没有报错，说明安装已成功。</p>
<p>4.python使用mysql数据库常见操作 exmysql.py</p>
<pre><code># -*- coding: utf-8 -*-                                                                                                                                 
import MySQLdb

try:
        #mysql连接
        conn = MySQLdb.connect(host=&apos;localhost&apos;,user=&apos;root&apos;,passwd=&apos;password&apos;,port=3306,charset=&apos;utf8&apos;)

        #创建游标
        cur = conn.cursor()

        #创建数据库
        cur.execute(&apos;create database if not exists  pythondb&apos;)

        #切换到数据库
        conn.select_db(&apos;pythondb&apos;)   

        #创建表
        cur.execute(&quot;create table student(id int,name varchar(20),age int)&quot;)

        #插入单条数据
        cur.execute(&quot;insert into student values(9,&apos;张三&apos;,28)&quot;)

        #插入多条数据
        cur.execute(&quot;insert into student values(2,&apos;shijingjing08&apos;,21),(3,&apos;shijingjing09&apos;,30),(4,&apos;shijingjing10&apos;,12)&quot;)

        #更新数据
        cur.execute(&quot;update student set age=27 where name=&apos;shijingjing07&apos; &quot;)

        #删除数据
        cur.execute(&quot;delete from student where name=&apos;shijingjing10&apos; &quot;)

        #查找数据
        count = cur.execute(&quot;select * from student &quot;)
        print &quot;总条数&quot;
        print count

        result = cur.fetchone()
        print &quot;查找一条&quot;
        print result

        results = cur.fetchmany(5)
        print &quot;查找多条&quot;
        for r in results:
                print r

        cur.scroll(0,mode=&apos;absolute&apos;)

        #游标定位到表中第一条数据
        results = cur.fetchall()

        print &quot;查找所有数据，第二列的值&quot;
        for r in results:
                print r[1]

        #在再次执行select查询返回结果集时，需要执行nextset()操作，移动到下一结果集，否则会报2014错误
        cur.nextset()


        #执行存储过程的两种方法
        #cur.execute(&quot;call get_student(&apos;shijingjing&apos;,20)&quot;)
        cur.callproc(&quot;get_student&quot;,(&apos;shijingjing&apos;,20))
        print &quot;执行存储过程&quot;
        data=cur.fetchall()
        for d in data:
                print d


        #关闭游标
        cur.close()

        #提交
        conn.commit()
        #关闭数据库连接
        conn.close()

except MySQLdb.Error,e:
        print &quot;Mysql Error %d:%s&quot;%(e.args[0],e.args[1]) 
</code></pre><p> 存储过程get_student(in p_name varchar(20),in p_age<br>int),输入name,age参数，模糊查找name,以及age&gt;p_age的学生。</p>
<pre><code>delimiter $
create procedure get_student(in p_name varchar(20),in p_age int) 
     begin
          select * from student where name like concat(p_name,&apos;%&apos;) and age&gt;p_age;
     end;
$
</code></pre><p>5.运行结果：</p>
<p><img src="http://images2015.cnblogs.com/blog/300946/201604/300946-20160401160447816-1857114613.png" alt=""></p>
<p>6.常用的操作：<br>commit() 提交<br>rollback() 回滚</p>
<p>callproc(self, procname, args):用来执行存储过程,接收的参数为存储过程名和参数列表,返回值为受影响的行数<br>execute(self, query, args):执行单条sql语句,接收的参数为sql语句本身和使用的参数列表,返回值为受影响的行数<br>executemany(self, query, args):执行单挑sql语句,但是重复执行参数列表里的参数,返回值为受影响的行数<br>nextset(self):移动到下一个结果集</p>
<p>fetchall(self):接收全部的返回结果行.<br>fetchmany(self,<br>size=None):接收size条返回结果行.如果size的值大于返回的结果行的数量,则会返回cursor.arraysize条数据.<br>fetchone(self):返回一条结果行.<br>scroll(self, value,<br>mode=’relative’):移动指针到某一行.如果mode=’relative’,则表示从当前所在行移动value条,如果<br>mode=’absolute’,则表示从结果集的第一行移动value条.</p>

    
  </div>
  <footer class="end-sep">
    
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>


  
    <article class="post">
  <header>
    
      <div class="icon"></div>
      <a href="/2016/03/31/python--笨方法学python 习题52/">
  <time datetime="2016-03-31T01:26:00.000Z">
    2016-03-31
  </time>
</a>
    
    
  
    <h1 class="title"><a href="/2016/03/31/python--笨方法学python 习题52/">python--笨方法学python 习题52</a></h1>
  

  </header>
  
  <div class="entry">
    
      <p>笨方法学python是一本不错的python入门书籍。<br>书的最后一节是一个web版的游戏程序，以下是程序代码：</p>
<p>1.项目的目录结构如下所示：<br>skeleton\<br>　　　　app.py<br>　　　　map.py<br>　　　　templates\<br>　　　　　　　　layout.html<br>　　　　　　　　show_room.html<br>　　　　　　　　you_died.html</p>
<p>2.游戏地图结构 map.py<br>其中Room类是游戏场景，包括场景名称 name，描述 description，通往下一场景的可能路径集合 paths。</p>
<p>定义了游戏中设计到的7个场景。</p>
<pre><code># -*- coding:utf-8 -*-                                                                                                                                  
class Room(object):
        def __init__(self, name, description): 
                self.name = name 
                self.description = description 
                self.paths = {}  

        def go(self, direction): 
                return self.paths.get(direction, None) 

        def add_paths(self, paths): 
                self.paths.update(paths)

central_corridor = Room(&quot;Central Corridor&quot;,
&quot;&quot;&quot;
#25外星战机入侵了你的飞船，并且摧毁了你的部队。你是最后一个幸存者，你的最终任务是从武器室拿到炸弹，将炸弹放在驾驶舱，跳进分离仓之后，炸掉飞船。
你现在正在往武器室跑去，这时，一个外星人跳了出来，可怕的红色皮肤，暗淡肮脏的牙齿，丑陋的服装围绕着他那充满憎恶的身体。他正在关闭通往武器室的大门，并且掏
出武器对准了你。
&quot;&quot;&quot;
)

laser_weapon_armory=Room(&quot;Laser Weapon Armory&quot;,
&quot;&quot;&quot;
幸运的是你知道外星人是由意念组成的。
你讲了一个你知道的外星笑话。
&amp;$%@#$#%#@*&amp;^$%$@#^&amp;@%~$@%%!@~^^@#
外星人停止了动作，试着不发出笑声，最终禁不住大笑起来，并且停不下来。
当他笑的时候，你跑上前去，一枪命中他的眉心，将他放倒。然后跳进武器室。
你一个前空翻进入武器室，仔细地检查武器室是否藏有更多的外星人。死一般的寂静，太安静了。
你站起来，跑向武器室的角落，在盒子里找到了炸弹。盒子上有一个键盘，你需要输入密码才能将炸弹取出来。如果你输错10次，炸弹将永远被锁住无法取出。密码是4位数&gt;字。
&quot;&quot;&quot;
)

the_bridge=Room(&quot;The Bridge&quot;,
&quot;&quot;&quot;
盒子咔哒一声打开了，密封破裂，毒气逸出。
你一把抓起炸弹，尽可能快递跑向驾驶舱，你必须把炸弹安置在合适的地点。
你闯入驾驶舱，手臂下夹着炸弹，惊奇地发现有5个外星人正在试图控制飞船。他们中的每一个都比上一个拥有更加丑陋的服装。他们没有拿出武器，因为他们看见了你手臂&gt;下的炸弹，并且不希望引爆它。
&quot;&quot;&quot;
)

escape_pod=Room(&quot;Escape Pod&quot;,
&quot;&quot;&quot;
你拉出手臂下炸弹的导火线，外星人们举起手来，开始流汗。
你缓慢地退向门口，打开门，然后小心翼翼地把炸弹放在地上，拉出导火线。然后跳出驾驶舱，按下关闭按钮，门锁住了，外星人们无法逃出去。
现在炸弹已经安放好了，你跑向逃生通道。
你不顾一切地冲过飞船，以确保在整个飞船爆炸之前到达分离仓。看起来没有外星人在船上了，所以几乎没有遇到任何阻碍。你成功到达分离仓，然后你需要选择一个。他们
中的一些已经被摧毁了，但是你没有时间去检查。总共有5个分离仓，你将选择哪一个呢？
&quot;&quot;&quot;
)

the_end_winner=Room(&quot;The End&quot;,
&quot;&quot;&quot;
你跳进了2号分离舱 ，按下发动按钮。分离舱很容易地向下方的地球滑去。当它飞向地球时，你往回看，发现你的飞船像一颗明亮的星星一样炸开了，同时炸掉了恶灵的飞船
。你赢了！
&quot;&quot;&quot;
)

the_end_loser=Room(&quot;The End&quot;,
&quot;&quot;&quot;
你随便跳进一个分离舱，按下发动按钮。分离舱逃向未知的空间，然后因为外壳破裂而爆炸，把你的身体压成肉酱。
&quot;&quot;&quot;
)
escape_pod.add_paths({
        &apos;2&apos;:the_end_winner,
        &apos;*&apos;:the_end_loser
})

generic_death=Room(&quot;death&quot;,&quot;You died.&quot;)

the_bridge.add_paths({
        &apos;throw the bomb&apos;:generic_death,
        &apos;slowly place the bomb&apos;:escape_pod
})

laser_weapon_armory.add_paths({
        &apos;0132&apos;:the_bridge,
        &apos;*&apos;:generic_death
})

central_corridor.add_paths({
        &apos;shoot!&apos;:generic_death,
        &apos;dodge!&apos;:generic_death,
        &apos;tell a joke&apos;:laser_weapon_armory
})

START=central_corridor
</code></pre><p>3.游戏引擎设计<br>游戏引擎，也就是我们的web应用程序入口，定义了起始场景。将场景作为参数传递给场景信息显示模板show_room.html，显示当前场景描述信息。玩家输入动作指令，提交表单后，根据当前场景以及输入的指令，确定下一场景并显示。因为Http协议的无状态性，当前场景可以通过两种方式传递：(1)通过web.py框架的session机制<br>(2)通过&lt;input type=”hidden” value=””&gt;隐藏域的方式。这里我们选择第一种方式。</p>
<pre><code>import web                                                                                                                                              
from map import *
import pdb 
urls=(
        &apos;/game&apos;,&apos;GameEngine&apos;,
        &apos;/&apos;,&apos;Index&apos;,
)

app=web.application(urls,globals())

if web.config.get(&apos;_session&apos;) is None:
        store = web.session.DiskStore(&apos;sessions&apos;)
        session = web.session.Session(app,store,initializer={&apos;room&apos;:None,&apos;count&apos;:0})
        web.config._session = session
else:
        session = web.config._session
render = web.template.render(&apos;templates/&apos;,base=&quot;layout&quot;)

class Index(object):
        def GET(self):
                session.room = START
                #输入错误密码次数初始化
                session.count = 0 
                web.seeother(&quot;/game&quot;)

class GameEngine(object):
        def GET(self):
            if session.room:
                return render.show_room(room=session.room)
            else:
                #场景为None，则跳转到death界面
                return render.you_died()

        def POST(self):
                form = web.input(action=None)
                if session.room and form.action:
                        result = session.room.go(form.action)
#                       pdb.set_trace()
                        #如果你输错10次，炸弹将永远被锁住无法取出
                        if session.room.name==&apos;Laser Weapon Armory&apos; and (result==None or result.name==&apos;death&apos;) and session.count&lt;10:
                                #输入错误密码次数累计
                                session.count=session.count+1
                        else:
                                session.room = result
                web.seeother(&quot;/game&quot;)

if __name__==&quot;__main__&quot;:
        app.run()
</code></pre><p>4.接着创建模板页，模板放在templates文件夹下.<br>mkdir templates<br>首先创建一个基础模板页 layout.html</p>
<pre><code>$def with (content)                                                                                                                                     
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Gothons From Planet Percal #25&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
$:content
&lt;/body&gt;
&lt;/html&gt;
</code></pre><p>场景信息显示页面  show_room.html</p>
<pre><code>$def with (room)                                                                                                                                        
&lt;h1&gt;$room.name&lt;/h1&gt;
&lt;pre&gt;
$room.description
&lt;/pre&gt;
$if room.name==&quot;death&quot;:
        &lt;p&gt;&lt;a href=&quot;/&quot;&gt;Play Again?&lt;/a&gt;&lt;/p&gt;
$else:
        &lt;p&gt;
        &lt;form action=&quot;/game&quot; method=&quot;POST&quot;&gt;
        -&lt;input type=&quot;text&quot; name=&quot;action&quot;&gt;
        &lt;input type=&quot;SUBMIT&quot;&gt;
        &lt;/form&gt;
        &lt;/p&gt;
</code></pre><p>场景为None失败，提示界面 you_died.html</p>
<pre><code>&lt;h1&gt;You Died!&lt;/h1&gt;                                                                                                                                      
&lt;p&gt;Looks like you bit the dust&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;/&quot;&gt;Play Again&lt;/a&gt;&lt;/p&gt;
</code></pre><p>5.运行：python app.py</p>
<p>6.结果：</p>
<p><img src="http://images2015.cnblogs.com/blog/300946/201603/300946-20160331172346129-267934389.png" alt=""></p>
<p><img src="http://images2015.cnblogs.com/blog/300946/201603/300946-20160331172410801-1185294461.png" alt=""></p>
<p><img src="http://images2015.cnblogs.com/blog/300946/201603/300946-20160331172428785-1970529617.png" alt=""></p>
<p><img src="http://images2015.cnblogs.com/blog/300946/201603/300946-20160331172445973-1703021698.png" alt=""></p>
<p><img src="http://images2015.cnblogs.com/blog/300946/201603/300946-20160331172459863-415540435.png" alt=""></p>

    
  </div>
  <footer class="end-sep">
    
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>


  
    <article class="post">
  <header>
    
      <div class="icon"></div>
      <a href="/2016/03/30/python--web.py使用/">
  <time datetime="2016-03-29T21:45:00.000Z">
    2016-03-30
  </time>
</a>
    
    
  
    <h1 class="title"><a href="/2016/03/30/python--web.py使用/">python--web.py使用</a></h1>
  

  </header>
  
  <div class="entry">
    
      <p>web.py 是一个轻量级Python web框架。</p>
<p>下面我将使用web.py框架，创建一个简单的html页面示例。</p>
<p>1.项目的目录结构如下所示：</p>
<p>exweb2\<br>  uniqueenv\<br>  app.py<br>  templates\</p>
<p>　　　　　　base.html</p>
<p>　　　　　　hello_form.html<br>                 index.html</p>
<p>2.创建网站根目录exweb2<br>mkdir exweb2</p>
<p>3.在网站根目录下创建一个虚拟环境<br>cd exweb2<br>virtualenv uniqueenv</p>
<p>4.安装flask<br>uniqueenv/bin/pip install lpthw.web</p>
<p>5.web.py使用，app.py代码如下</p>
<pre><code>#-*- coding: UTF-8 -*-                                                           
import web 

urls =(
        &apos;/&apos;,&apos;Index&apos;
)

app = web.application(urls,globals())
 #base为基础模板页
render = web.template.render(&apos;templates/&apos;,base=&quot;base&quot;)

class Index(object):
         #get方式提交，若url参数不为空,直接跳转到显示界面,否则跳转到输入信息界面
        def GET(self):
                form = web.input(name=&quot;&quot;,greet=&quot;&quot;)
                if form.greet!=&quot;&quot; and form.name!=&quot;&quot;:
                        greeting=&quot;%s,%s&quot;%(form.greet,form.name)
                        return render.index(greeting=greeting)
                return render.hello_form()
        #post方式提交表单,
        def POST(self):
                form = web.input(name=&quot;Nobody&quot;,greet=&quot;Hello&quot;)
                greeting=&quot;%s,%s&quot;%(form.greet,form.name)
                return render.index(greeting=greeting)
if __name__ == &quot;__main__&quot;:
        app.run() 
</code></pre><p>6.接着创建模板页，模板放在templates文件夹下.</p>
<p><strong>mkdir templates</strong></p>
<p>首先创建一个基础模板页 base.html</p>
<pre><code>$def with (content)                                                              
&lt;html&gt;                                                                               
        &lt;head&gt;
                &lt;title&gt;
                &lt;/title&gt;
        &lt;/head&gt;
        &lt;body&gt;
                $:content
        &lt;/body&gt;
&lt;/html&gt;
</code></pre><p>输入信息页 hello_form.html</p>
<pre><code>&lt;h1&gt;Fill out this form&lt;/h1&gt;                                                      
&lt;form action=&quot;/&quot; method=&quot;POST&quot;&gt;
A Greeting:&lt;input type=&quot;text&quot; name=&quot;greet&quot;&gt;
&lt;br/&gt;
Your Name:&lt;input type=&quot;text&quot; name=&quot;name&quot;&gt;
&lt;br/&gt;
&lt;input type=&quot;submit&quot;&gt;
&lt;/form&gt;
</code></pre><p>显示信息页 index.html</p>
<pre><code>$def with (greeting)                                                             

$if greeting: 
        I just wanted to say &lt;em style=&quot;color: green; font-size: 2em;&quot;&gt;$greeting&lt;/em&gt;. 
$else: 
        &lt;em&gt;Hello&lt;/em&gt;, world!
</code></pre><p> <em>7.运行：uniqueenv/bin/python app.py</em></p>
<p>注意运行的时候要使用虚拟目录中的python解释器</p>
<p><img src="http://images2015.cnblogs.com/blog/300946/201603/300946-20160330134039535-1709829164.png" alt=""></p>
<p>8.结果：</p>
<p>(1)Get方式</p>
<p><img src="http://images2015.cnblogs.com/blog/300946/201603/300946-20160330134104035-42679323.png" alt=""></p>
<p>(2)Post方式</p>
<p><img src="http://images2015.cnblogs.com/blog/300946/201603/300946-20160330134340254-2054116773.png" alt=""></p>
<p><img src="http://images2015.cnblogs.com/blog/300946/201603/300946-20160330134351738-986870576.png" alt=""></p>

    
  </div>
  <footer class="end-sep">
    
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>


  
    <article class="post">
  <header>
    
      <div class="icon"></div>
      <a href="/2016/03/29/python--flask使用/">
  <time datetime="2016-03-28T21:47:00.000Z">
    2016-03-29
  </time>
</a>
    
    
  
    <h1 class="title"><a href="/2016/03/29/python--flask使用/">python--flask使用</a></h1>
  

  </header>
  
  <div class="entry">
    
      <p>Flask是一个使用 Python 编写的轻量级 Web 应用框架。<br>下面我将使用Flask框架，创建一个简单的html页面示例。</p>
<p>1.项目的目录结构如下所示：<br>exweb\<br>  uniqueenv\<br>  app.py<br>  templates\</p>
<p>　　　　　　base.html</p>
<p>　　　　　　hello_form.html<br>                 index.html</p>
<p>2.创建网站根目录exweb<br>mkdir exweb</p>
<p>3.在网站根目录下创建一个虚拟环境，虚拟环境是主python的一份拷贝，好处是你可以只安装flask包到该虚拟目录，你的主python不会受到影响，另一个好处是你不需要再有root权限<br>cd exweb<br>virtualenv uniqueenv</p>
<p>4.安装flask<br>uniqueenv/bin/pip install flask</p>
<p>5.flask使用，app.py代码如下</p>
<pre><code>#-*- coding: UTF-8 -*-                                                                                                                                  
from flask import Flask,render_template,request
from flask.ext.wtf import Form
from wtforms import TextField, BooleanField, TextAreaField
from wtforms.validators import Required, Length

app = Flask(__name__)

#CSRF_ENABLED 配置是为了激活 跨站点请求伪造 保护
app.config[&apos;CSRF_ENABLED&apos;]=True
app.config[&apos;SECRET_KEY&apos;]=&apos;xxx&apos;

#form表单类
class HelloForm(Form):
    name = TextField(&apos;name&apos;,validators = [Required()])
    greet=TextField(&apos;greet&apos;,validators=[Required()])


@app.route(&apos;/&apos;,methods=[&apos;GET&apos;,&apos;POST&apos;])
def index():
        #get方式提交，若url参数不为空,直接跳转到显示界面
        name = request.args.get(&apos;name&apos;)
        greet = request.args.get(&apos;greet&apos;)
        if name!=&apos;&apos; and name!=None and greet!=&apos;&apos; and greet!=None:
                greeting=&quot;%s,%s&quot;%(name,greet)
                return render_template(&apos;index.html&apos;,
                        title=u&apos;显示信息&apos;,
                        greeting = greeting)


        #否则为post方式提交表单,跳转到输入信息界面
        form = HelloForm()
        if form.validate_on_submit():
                greeting=&quot;%s,%s&quot;%(form.name.data,form.greet.data)
                return render_template(&apos;index.html&apos;,
                        title=u&apos;显示信息&apos;,
                        greeting = greeting)
        return render_template(&apos;hello_form.html&apos;,
                title=u&apos;输入信息&apos;,
                form = form)

app.run(debug=True)
</code></pre><p>6.上一步我们从 Flask 框架中导入一个名为 render_template 的新函数，在内部，render_template 调用了 Jinja2<br>模板引擎，Jinja2 会把模板参数提供的相应的值替换。<br>模板放在templates文件夹下.<br>mkdir templates</p>
<p>首先创建一个基础模板页 base.html</p>
<pre><code>&lt;html&gt;                                                                                                                 
         &lt;head&gt;
                &lt;title&gt;{{title}}&lt;/title&gt;
        &lt;/head&gt;
        &lt;body&gt;
                {% block content %}{% endblock %}
            
    



输入信息页 hello_form.html

    
    
    {% extends "base.html" %}                                                                                                 
    
    {% block content %}
    <h1>Fill out this form</h1>    
    <form action="" method="POST">
    {{form.hidden_tag()}}
    A Greeting:
    {{form.greet(size=30,maxlength=140)}}
    <br>
    Your Name:
    {{form.name(size=30,maxlength=140)}}
    <br>
    <input type="submit">
    </form>
    {% endblock %}
</code></pre><p>显示信息页 index.html</p>
<pre><code>{% extends "base.html" %}                                                                                                                            

{% block content %}
    {%if greeting:%}
     I just wanted to say <em style="color:green;font-size:2em;">{{greeting}}</em>
    {%endif%}
    {% endblock %}
</code></pre><p>7.运行：uniqueenv/bin/python app.py</p>
<p>注意运行的时候要使用虚拟目录中的python解释器</p>
<p><img src="http://images2015.cnblogs.com/blog/300946/201603/300946-20160330095956098-476888447.png" alt=""></p>
<p>8.结果：</p>
<p>(1)Get方式</p>
<p><img src="http://images2015.cnblogs.com/blog/300946/201603/300946-20160330095846504-570096275.png" alt=""></p>
<p>(2)Post方式</p>
<p><img src="http://images2015.cnblogs.com/blog/300946/201603/300946-20160330100036348-1915660279.png" alt=""></p>
<p><img src="http://images2015.cnblogs.com/blog/300946/201603/300946-20160330100106379-1591817480.png" alt=""></p>

    
  </div>
  <footer class="end-sep">
    
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>


  
    <article class="post">
  <header>
    
      <div class="icon"></div>
      <a href="/2016/03/25/python--类方法、对象方法、静态方法/">
  <time datetime="2016-03-25T05:08:00.000Z">
    2016-03-25
  </time>
</a>
    
    
  
    <h1 class="title"><a href="/2016/03/25/python--类方法、对象方法、静态方法/">python--类方法、对象方法、静态方法</a></h1>
  

  </header>
  
  <div class="entry">
    
      <p> 1、我们已经讨论了类/对象可以拥有像函数一样的方法，这些对象方法与函数的区别只是一个额外的self变量</p>
<pre><code># -*- coding:utf-8 -*-
#!/usr/bin/python
# Filename: method.py

class Person:
    grade=1
    def __init__(self,name):
        self.name = name
    def sayHi(self):#加self区别于普通函数
        print &apos;Hello, your name is?&apos;,self.name

    @staticmethod #声明静态，去掉则编译报错;还有静态方法不能访问类变量和实例变量
    def sayName():#使用了静态方法，则不能再使用self
        print &quot;my name is king&quot;#,grade,#self.name

    @classmethod #类方法
    def classMethod(cls):
        print(&quot;class method&quot;)

p = Person(&quot;king&quot;)
p.sayHi()
p.sayName()
p.classMethod()
Person.classMethod()

输出：
Hello, your name is? king
my name is king
class method
class method
</code></pre><p>2、静态方法<br>要在类中使用静态方法，需在类成员函数前面加上@staticmethod标记符，以表示下面的成员函数是静态函数。使用静态方法的好处是，不需要定义实例即可使用这个方法。另外，多个实例共享此静态方法。  </p>
<p>3、 类方法<br>类方法与普通的成员函数和静态函数有不同之处，在接触的语言中好像也没见过这种语义，看它的定义：<br>一个类方法就可以通过类或它的实例来调用的方法, 不管你是用类来调用这个方法还是类实例调用这个方法,该方法的第一个参数总是定义该方法的类对象。<br>记住:方法的第一个参数都是类对象而不是实例对象.<br>按照惯例,类方法的第一个形参被命名为<br>cls.任何时候定义类方法都不是必须的（类方法能实现的功能都可以通过定义一个普通函数来实现,只要这个函数接受一个类对象做为参数就可以了）.  </p>
<p>python中实现静态方法和类方法都是依赖于python的修饰器来实现的。 对象方法有self参数，类方法有cls参数，静态方法是不需要这些附加参数的。</p>
<p>转自：<a href="http://blog.chinaunix.net/uid-26602509-id-3087296.html" target="_blank" rel="external">http://blog.chinaunix.net/uid-26602509-id-3087296.html</a></p>

    
  </div>
  <footer class="end-sep">
    
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>


  
    <article class="post">
  <header>
    
      <div class="icon"></div>
      <a href="/2016/03/25/Python--类定义/">
  <time datetime="2016-03-25T05:06:00.000Z">
    2016-03-25
  </time>
</a>
    
    
  
    <h1 class="title"><a href="/2016/03/25/Python--类定义/">Python--类定义</a></h1>
  

  </header>
  
  <div class="entry">
    
      <p>转自：<a href="http://kanwoerzi.iteye.com/blog/1304466" target="_blank" rel="external">http://kanwoerzi.iteye.com/blog/1304466</a></p>
<p>Python笔记—-类定义</p>
<p>一、类定义：</p>
<p>class &lt;类名&gt;:</p>
<p>&lt;语句&gt;</p>
<p>类实例化后，可以使用其属性，实际上，创建一个类之后，可以通过类名访问其属性</p>
<p>如果直接使用类名修改其属性，那么将直接影响到已经实例化的对象</p>
<p>类的私有属性：</p>
<p>__private_attrs 两个下划线开头，声明该属性为私有，不能在类地外部被使用或直接访问</p>
<p>在类内部的方法中使用时 self.__private_attrs</p>
<p>类的方法</p>
<p>在类地内部，使用def关键字可以为类定义一个方法，与一般函数定义不同，类方法必须包含参数self,且为第一个参数</p>
<p>私有的类方法</p>
<p>__private_method 两个下划线开头，声明该方法为私有方法，不能在类地外部调用</p>
<p>在类的内部调用slef.__private_methods</p>
<p>类的专有方法：</p>
<p><strong>init</strong> 构造函数，在生成对象时调用</p>
<p><strong>del</strong> 析构函数，释放对象时使用</p>
<p><strong>repr</strong> 打印，转换</p>
<p><strong>setitem</strong>按照索引赋值</p>
<p><strong>getitem</strong>按照索引获取值</p>
<p><strong>len</strong>获得长度</p>
<p><strong>cmp</strong>比较运算</p>
<p><strong>call</strong>函数调用</p>
<p><strong>add</strong>加运算</p>
<p><strong>sub</strong>减运算</p>
<p><strong>mul</strong>乘运算</p>
<p><strong>div</strong>除运算</p>
<p><strong>mod</strong>求余运算</p>
<p><strong>pow</strong>称方</p>
<p>示例:</p>
<pre><code>class people:  
    #定义基本属性  
    name = &apos;&apos;  
    age = 0  
    #定义私有属性,私有属性在类外部无法直接进行访问  
    __weight = 0  
    #定义构造方法  
    def __init__(self,n,a,w):  
        self.name = n  
        self.age = a  
        self.__weight = w  
    def speak(self):  
        print(&quot;%s is speaking: I am %d years old&quot; %(self.name,self.age))  


p = people(&apos;tom&apos;,10,30)  
p.speak()  
</code></pre><p>二、继承类定义：</p>
<p>1.单继承</p>
<p>class &lt;类名&gt;(父类名)</p>
<p>&lt;语句&gt;</p>
<p>eg.</p>
<p>class childbook(book)</p>
<p>age = 10</p>
<pre><code>#单继承示例  
class student(people):  
    grade = &apos;&apos;  
    def __init__(self,n,a,w,g):  
        #调用父类的构函  
        people.__init__(self,n,a,w)  
        self.grade = g  
    #覆写父类的方法  
    def speak(self):  
        print(&quot;%s is speaking: I am %d years old,and I am in grade %d&quot;%(self.name,self.age,self.grade))  



s = student(&apos;ken&apos;,20,60,3)  
s.speak()  
</code></pre><p>2.类的多重继承</p>
<p>class 类名(父类1,父类2,….,父类n)</p>
<p>&lt;语句1&gt;</p>
<p>需要注意圆括号中父类的顺序，若是父类中有相同的方法名，而在子类使用时未指定，python从左至右搜索</p>
<p>即方法在子类中未找到时，从左到右查找父类中是否包含方法</p>
<pre><code>#另一个类，多重继承之前的准备  
class speaker():  
    topic = &apos;&apos;  
    name = &apos;&apos;  
    def __init__(self,n,t):  
        self.name = n  
        self.topic = t  
    def speak(self):  
        print(&quot;I am %s,I am a speaker!My topic is %s&quot;%(self.name,self.topic))  

#多重继承  
class sample(speaker,student):  
    a =&apos;&apos;  
    def __init__(self,n,a,w,g,t):  
        student.__init__(self,n,a,w,g)  
        speaker.__init__(self,n,t)  

test = sample(&quot;Tim&quot;,25,80,4,&quot;Python&quot;)  
test.speak()#方法名同，默认调用的是在括号中排前地父类的方法  
</code></pre><p>类方法的覆写—-子类覆盖掉父类的方法</p>
<p>def 方法名与父类一致</p>
<p>若是在方法中要使用到父类方法 父类名.方法名</p>
<p>若是将类放到了模块中</p>
<p>使用时</p>
<p>import A</p>
<p>l = A.类()</p>
<p>以上三段程序的执行结果:</p>
<p>类方法的覆写—-子类覆盖掉父类的方法</p>
<p>def 方法名与父类一致</p>
<p>若是在方法中要使用到父类方法 父类名.方法名</p>
<p>若是将类放到了模块中</p>
<p>使用时</p>
<p>import A</p>
<p>l = A.类()</p>
<p>以上三段程序的执行结果:</p>
<p>类方法的覆写—-子类覆盖掉父类的方法</p>
<p>def 方法名与父类一致</p>
<p>若是在方法中要使用到父类方法 父类名.方法名</p>
<p>若是将类放到了模块中</p>
<p>使用时</p>
<p>import A</p>
<p>l = A.类()</p>
<p>以上三段程序的执行结果:</p>
<p><img src="http://images2015.cnblogs.com/blog/300946/201603/300946-20160325210542370-292640845.jpg" alt=""></p>

    
  </div>
  <footer class="end-sep">
    
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>


  

  <nav id="pagination">
  
    <a href="/page/12/" class="prev">Prev</a>
  
  
  <div class="clearfix"></div>
</nav>

</div>
  </div>
  <footer id="footer"><div class="copyright">
  
  &copy; 2017 <a href="/">迪米特</a>
  
</div>
<div class="theme-copyright">
  Theme by <a href="https://github.com/orderedlist" target="_blank">orderedlist</a>
   | 
  Redesign by <a href="http://heroicyang.com/" target="_blank">Heroic Yang</a>
</div>
<div class="clearfix"></div></footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
<script src="/js/scale.fix.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>


<script type="text/javascript">
  var duoshuoQuery = { short_name: 'shijingjing07' };
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';
    ds.async = true;
    ds.src = 'http://static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script>



<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
  (function($){
    $('.fancybox').fancybox();
  })(jQuery);
</script>

</body>
</html>